<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../static/css/stars.css"/>
    <link href="../static/node_modules/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
</head>
<body>
    <h1>How many stars would you like to rate the movie: {{movieName}}</h1>
    <fieldset class="rate">
        <input type="radio" id="rating10" name="rating" value="10" /><label for="rating10" title="5 stars"></label>
        <input type="radio" id="rating9" name="rating" value="9" /><label class="half" for="rating9" title="4 1/2 stars"></label>
        <input type="radio" id="rating8" name="rating" value="8" /><label for="rating8" title="4 stars"></label>
        <input type="radio" id="rating7" name="rating" value="7" /><label class="half" for="rating7" title="3 1/2 stars"></label>
        <input type="radio" id="rating6" name="rating" value="6" /><label for="rating6" title="3 stars"></label>
        <input type="radio" id="rating5" name="rating" value="5" /><label class="half" for="rating5" title="2 1/2 stars"></label>
        <input type="radio" id="rating4" name="rating" value="4" /><label for="rating4" title="2 stars"></label>
        <input type="radio" id="rating3" name="rating" value="3" /><label class="half" for="rating3" title="1 1/2 stars"></label>
        <input type="radio" id="rating2" name="rating" value="2" /><label for="rating2" title="1 star"></label>
        <input type="radio" id="rating1" name="rating" value="1" checked/><label class="half" for="rating1" title="1/2 star"></label>
    </fieldset>

    <div class="subbut">
        <button id="btn">
            <p id="btnText">Submit</p>
            <div class="check-box">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                    <path fill="transparent" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                </svg>
            </div>
        </button>
    </div>
    <script type="text/javascript">
        const btn = document.querySelector("#btn");
        const btnText = document.querySelector("#btnText");

        btn.onclick = () => {
            btnText.innerHTML = "Thanks";
            btn.classList.add("active");
            var rate = document.querySelector('input[name="rating"]:checked').value;
            curURL = new URL(window.location.href);
            var movieID = curURL.searchParams.get("movieID")

            window.setTimeout(function() {
                // Move to a new location or you can do something else
                window.location.href = `/submitted?movieID=${movieID}&rating=${rate}`;

            }, 1000);
        };
    </script>
</body>
</html>
